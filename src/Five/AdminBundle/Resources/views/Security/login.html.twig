{% set query         = app.request.attributes.get('_route_params') %}
{% set locale_switch = ( app.request.get( '_locale' ) == 'en' ) ? 'fr' : 'en' %}
{% set theme_path = '/bundles/fiveadmin/coco_theme/' %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Admin | Login</title>   
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="description" content="">

        <!-- Base Css Files -->
        <link href="{{ asset( theme_path ~ 'assets/libs/jqueryui/ui-lightness/jquery-ui-1.10.4.custom.min.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/bootstrap/css/bootstrap.min.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/font-awesome/css/font-awesome.min.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/fontello/css/fontello.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/animate-css/animate.min.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/nifty-modal/css/component.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/magnific-popup/magnific-popup.css' ) }}" rel="stylesheet" /> 
        <link href="{{ asset( theme_path ~ 'assets/libs/ios7-switch/ios7-switch.css' ) }}" rel="stylesheet" /> 
        <link href="{{ asset( theme_path ~ 'assets/libs/pace/pace.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/sortable/sortable-theme-bootstrap.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/bootstrap-datepicker/css/datepicker.css' ) }}" rel="stylesheet" />
        <link href="{{ asset( theme_path ~ 'assets/libs/jquery-icheck/skins/all.css' ) }}" rel="stylesheet" />
        <!-- Code Highlighter for Demo -->
        <link href="{{ asset( theme_path ~ 'assets/libs/prettify/github.css' ) }}" rel="stylesheet" />
        
        <!-- Extra CSS Libraries Start -->
        <link href="{{ asset( theme_path ~ 'assets/css/style.css' ) }}" rel="stylesheet" type="text/css" />
        <!-- Extra CSS Libraries End -->
        <link href="{{ asset( theme_path ~ 'assets/css/style-responsive.css' ) }}" rel="stylesheet" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <link rel="shortcut icon" href="{{ asset( theme_path ~ 'assets/img/favicon.ico' ) }}">
        <link rel="apple-touch-icon" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon.png' ) }}" />
        <link rel="apple-touch-icon" sizes="57x57" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-57x57.png' ) }}" />
        <link rel="apple-touch-icon" sizes="72x72" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-72x72.png' ) }}" />
        <link rel="apple-touch-icon" sizes="76x76" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-76x76.png' ) }}" />
        <link rel="apple-touch-icon" sizes="114x114" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-114x114.png' ) }}" />
        <link rel="apple-touch-icon" sizes="120x120" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-120x120.png' ) }}" />
        <link rel="apple-touch-icon" sizes="144x144" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-144x144.png' ) }}" />
        <link rel="apple-touch-icon" sizes="152x152" href="{{ asset( theme_path ~ 'assets/img/apple-touch-icon-152x152.png' ) }}" />
    </head>
    <body class="fixed-left login-page">
        <!-- Modal Start -->

        
    <!-- Modal Logout -->
    <div class="md-modal md-just-me" id="logout-modal">
        <div class="md-content">
            <h3><strong>Logout</strong> Confirmation</h3>
            <div>
                <p class="text-center">Are you sure want to logout from this awesome system?</p>
                <p class="text-center">
                <button class="btn btn-danger md-close">Nope!</button>
                <a href="login.html" class="btn btn-success md-close">Yeah, I'm sure</a>
                </p>
            </div>
        </div>
    </div>        <!-- Modal End -->        
    <!-- Begin page -->
    <div class="container">
        <div class="full-content-center">
            <p class="text-center"><img src="{{ asset( '/bundles/fivecuisinesverdun/img/logo-menu.png' ) }}" class="img-responsive not-logged-avatar" style="width:275px;"><!-- <a href="#"><img src="http://www.five.ca/bundles/fivesite/images/logos/five.png" alt="Logo"></a> --></p>
            <div class="login-wrap animated flipInX">
                <div class="login-block">

                    <img src="http://www.five.ca/bundles/fivesite/images/logos/five.png" class="img-responsive not-logged-avatar">
                    <form name="login_form" id="login_form" role="form" action="/login_check" method="post">
                        <div class="login-errors"></div>
                        <div class="form-group login-input">
                        <i class="fa fa-user overlay"></i>
                        
                        <input type="hidden" name="_failure_path" value="{{ path( 'login_error' ) }}" />
                        <input type="hidden" name="_target_path" value="{{ path( 'login_success' ) }}" />

                        <input type="text" name="_username" id="username" class="form-control text-input" placeholder="Email address">
                        </div>
                        <div class="form-group login-input">
                        <i class="fa fa-key overlay"></i>
                        <input name="_password" type="password" id="password" class="form-control text-input" placeholder="********">
                        </div>
                        
                        <div class="row">
                            <div class="col-sm-12">
                                <button type="submit" id="loginSubmitBtn" class="btn btn-success btn-block">LOGIN</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
        </div>
    </div>
    <!-- the overlay modal element -->
    <div class="md-overlay"></div>
    <!-- End of eoverlay modal -->
    <script>
        var resizefunc = [];
    </script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery/jquery-1.11.1.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap/js/bootstrap.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jqueryui/jquery-ui-1.10.4.custom.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-ui-touch/jquery.ui.touch-punch.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-detectmobile/detect.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-animate-numbers/jquery.animateNumbers.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/ios7-switch/ios7.switch.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/fastclick/fastclick.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-blockui/jquery.blockUI.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap-bootbox/bootbox.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-slimscroll/jquery.slimscroll.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-sparkline/jquery-sparkline.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/nifty-modal/js/classie.js' ) }}"></script>
    {#<script src="{{ asset( theme_path ~ 'assets/libs/nifty-modal/js/modalEffects.js' ) }}"></script>#}
    <script src="{{ asset( theme_path ~ 'assets/libs/sortable/sortable.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap-fileinput/bootstrap.file-input.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap-select/bootstrap-select.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap-select2/select2.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/magnific-popup/jquery.magnific-popup.min.js' ) }}"></script> 
    <script src="{{ asset( theme_path ~ 'assets/libs/pace/pace.min.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/bootstrap-datepicker/js/bootstrap-datepicker.js' ) }}"></script>
    <script src="{{ asset( theme_path ~ 'assets/libs/jquery-icheck/icheck.min.js' ) }}"></script>

    <!-- Demo Specific JS Libraries -->
    <script src="{{ asset( theme_path ~ 'assets/libs/prettify/prettify.js' ) }}"></script>

        <script src="{{ asset( theme_path ~ 'assets/js/init.js' ) }}"></script>
    </body>
</html>
<script>
$( document ).ready( function()
{
    $( '#login_form' ).on( 'submit', function( evt )
    {
        evt.preventDefault();
        if( $.trim( $( '#username' ).val() ) == '' || $.trim( $( '#password' ).val() ) == ''  )
        {
            $( '#login_form' ).find( '.login-errors' ).html( 'Please enter your email address and password.' ).css( 'color', '#ff0000' ).show();
        }
        else
        {
            submitLoginForm( $( '#login_form' ) );    
        }        
    } );
} );

function submitLoginForm( form )
{
    var errors = [];
    //$( form ).find( '.login-errors' ).html( result.errors.join( '<br />' ) ).css( 'color', '#ff0000' ).show();
    $( form ).find( '.login-errors' ).text( "" ).hide();
    $.ajax( {
        type: "POST",
        url: $( form ).attr( 'action' ),
        data: $( form ).serialize(),
        cache: "false",
        beforeSend: function() {
          /*showLoader($(form).find('.loader'), $(form).find('button[type="submit"]'))*/
        },
        complete: function() {
          /*hideLoader($(form).find('.loader'), $(form).find('button[type="submit"]'))*/
          //window.location.href = '/admin/';
        },        
        error: function( result, txt )
        {            

        },
        success: function( result )
        {
            $( form ).find( '.login-errors' ).html( "" ).hide();

            if( result.status == 'success' )
            {
                window.location.href = '{{ path( 'five_admin_home' ) }}';
            }
            else
            {
                $( form ).find( '.login-errors' ).html( 'Your email address and/or password are invalid.' ).css( 'color', '#ff0000' ).show();
            }            
        },   
        dataType: 'json'
    } );    
}
</script>